<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Loucos Por Tapioca</title>
    
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <div id="tela-inicial">
        <div class="logo-capa">
            <img src="Tela Inicial.jpg.png" alt="Logo">
        </div>
        <div class="info-capa">
            <h3>Loucos Por Tapioca</h3>
            <p>R. Equador, 23 - Alto Santo Antonio</p>
            <span style="background:white; color:green; padding:5px 15px; border-radius:15px; font-weight:bold; font-size:12px;">Estamos Abertos</span>
        </div>
        
        <button class="btn-inicio" onclick="entrarApp()">
            Fazer Pedido
        </button>
        <a href="https://wa.me/5581991243260" class="btn-inicio">
            <i class="fa-brands fa-whatsapp"></i> Whatsapp
        </a>
        <a href="https://instagram.com" class="btn-inicio">
            <i class="fa-brands fa-instagram"></i> Instagram
        </a>
    </div>

    <header>
        <div class="btn-header" onclick="abrirInfo()">
            <i class="fa-solid fa-info"></i>
        </div>
        <div class="logo-header">
            <img src="Tela Inicial.jpg.png" alt="Logo Peq">
        </div>
        <div class="btn-header" onclick="abrirMenu()">
            <i class="fa-solid fa-bars"></i>
        </div>
    </header>

    <nav class="categorias">
        <a href="#" class="ativo" onclick="filtrar('todos', this)">Todos</a>
        <a href="#" onclick="filtrar('pratos', this)">Pratos</a>
        <a href="#" onclick="filtrar('tapioca-grande', this)">Tapioca G</a>
        <a href="#" onclick="filtrar('bebidas', this)">Bebidas</a>
    </nav>

    <main>
        <div id="itens-cardapio">
            <p style="text-align:center; padding:50px;">Carregando cardÃ¡pio...</p>
        </div>
    </main>

    <div class="sticky-footer">
        <div>
            <span class="qtd-itens">0 Produtos</span><br>
            <span class="total-valor">R$ 0,00</span>
        </div>
        <a href="carrinho.html" class="btn-ver-pedido">
            Ver Sacola
        </a>
    </div>

    <div id="menu-lateral" class="menu-lateral">
        <div style="text-align:right; margin-bottom:20px;">
            <i class="fa-solid fa-xmark" onclick="fecharMenu()" style="font-size:30px;"></i>
        </div>
        <a href="#" onclick="fecharMenu()"><i class="fa-solid fa-utensils"></i> CardÃ¡pio</a>
        <a href="carrinho.html"><i class="fa-solid fa-cart-shopping"></i> Carrinho</a>
        <a href="admin.html"><i class="fa-solid fa-lock"></i> Admin</a>
    </div>

    <div id="modal-info" class="modal-fundo" onclick="fecharInfo(event)">
        <div class="modal-box">
            <h3>HorÃ¡rios ðŸ•’</h3>
            <p>Seg-Sex: 16h as 22h</p>
            <p>Sab-Dom: 16h as 23h</p>
            <br>
            <button onclick="fecharInfo(null)" style="padding:10px; background:#eee; border:none; border-radius:5px;">Fechar</button>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script>
        // CONFIG DO FIREBASE (SUAS CHAVES)
        const firebaseConfig = {
            apiKey: "AlzaSyBp32ijeLw2LvNwKur5EaUj7B9WZ1G-AW0",
            authDomain: "loucosportapioca-57964.firebaseapp.com",
            projectId: "loucosportapioca-57964",
            storageBucket: "loucosportapioca-57964.firebasestorage.app",
            messagingSenderId: "371332659198",
            appId: "1:371332659198:web:330626357653acc00772af"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // 1. CARREGAR DADOS
        db.collection("produtos").onSnapshot((qs) => {
            menuGlobal = [];
            qs.forEach((doc) => menuGlobal.push({id: doc.id, ...doc.data()}));
            // Chama a funÃ§Ã£o do script.js para desenhar
            if(window.renderizarMenu) window.renderizarMenu('todos');
        });

        // 2. FUNÃ‡Ã•ES VISUAIS
        function entrarApp() {
            document.getElementById('tela-inicial').style.top = "-100%";
        }
        function abrirMenu() { document.getElementById('menu-lateral').classList.add('aberto'); }
        function fecharMenu() { document.getElementById('menu-lateral').classList.remove('aberto'); }
        function abrirInfo() { document.getElementById('modal-info').style.display = 'flex'; }
        function fecharInfo(e) { 
            if(!e || e.target.id === 'modal-info') document.getElementById('modal-info').style.display = 'none'; 
        }

        // 3. FILTRO
        function filtrar(cat, el) {
            document.querySelectorAll('.categorias a').forEach(a => a.classList.remove('ativo'));
            el.classList.add('ativo');
            window.renderizarMenu(cat);
        }
    </script>
    <script src="script.js"></script>
</body>
</html>